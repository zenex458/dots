#!/usr/bin/env dash

case $XDG_SESSION_TYPE in
    "wayland")  menu="bemenu -i --no-exec -p" && lock="swaylock -f -c 000000";;
	"x11")  menu="rofi -demu -p" && lock="xsecurelock";;
	*)  echo "Invalid 'XDG_SESSION_TYPE' " && exit 1;;
esac 

doubts(){
    dsel=$(echo "No\nYes" | $menu "Are you sure?")
    if [ "$dsel" = "Yes" ]; then
        echo hello	
    else
        exit
    fi
}


sel=$(echo "Lock\nPoweroff\nReboot\nSleep" | $menu "")

case "$sel" in
    Lock) doubts && $lock;;
    Poweroff) doubts && systemctl poweroff;;
    Reboot) doubts && systemctl reboot;;
    Sleep) doubts && systemctl suspend && $lock;;
    *) exit
esac
