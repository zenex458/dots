#!/usr/bin/env bash

if [ "$XDG_SESSION_TYPE" == "wayland" ]; then
    menu="bemenu -i --no-exec -p"
    lock="swaylock"
else
    menu="dmenu -i -p" ## rofi -dmenu -p
    lock="xsecurelock"
fi


doubts() {
	dsel=$(printf "No\nYes" | $menu "Are you sure?")
	if [ "$dsel" = "Yes" ]; then
		return 0
	else
		exit
	fi
}

sel=$(printf "Lock\nPoweroff\nReboot\nSleep" | $menu "Choose Your Option:")

case "$sel" in
Lock) doubts && $lock ;;
Poweroff) doubts && systemctl poweroff ;;
Reboot) doubts && systemctl reboot ;;
Sleep) doubts && systemctl suspend ;;
	   # Sleep) doubts && systemctl suspend && $lock ;;
*) exit ;;
esac
